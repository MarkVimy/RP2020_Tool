# RP2020_Tool
> RP2020上位机调试工具 ，目前集成了[ __串口助手__ ]和[ __示波器__ ]（含导出小工具）

## 使用说明

---
### 硬件平台
目前使用的无线数据传输模块为深联创新DL-20(Zigbee)，支持双工而且最高传输速率可达3300字节/秒。     

---
### 串口配置
波特率115200，8位数据位，1位停止位，无硬件流控，无校验位

---
### 数据协议
#### 通信协议格式
| frame_header | data | frame_tail |
| :----------: | :--: | :--------: |
|     帧头     |  数据 |    帧尾    |

#### 帧头格式
| 域       | 偏移位置 | 大小(字节) | 详细描述                      |
| :------: | :-----: | :--------: | :--------------------------: |
| SOF      | 0       | 2          | 数据帧起始字节，固定值为0xAAAA |
| frame_id | 2       | 1          | 帧id以区分不同帧              |
| data_len | 3       | 1          | 数据段长度                    |

#### 数据段
| 域   | 偏移位置 | 大小(字节) | 详细描述         |
| :--: | :-----: | :--------: | :-------------: |
| data | 4       | n          | 由具体帧格式确定 |

#### 帧尾格式
| 域        | 偏移位置 | 大小(字节) | 详细描述                      |
| :-------: | :---:   | :--------: | :--------------------------: |
| check_sum | 4+n     | 1          | 和校验(该字节前所有字节累加)   |

#### 数据帧具体数据段格式
##### Frame1(n=18)
| 域         | 偏移位置 | 大小(字节) | 详细描述    |
| :--------: | :-----: | :--------: | :---------: |
| yaw        | 4       | 4(float)   | yaw角度     |
| pitch      | 8       | 4(float)   | pitch角度   |
| roll       | 12      | 4(float)   | roll角度    |
| yaw_rate   | 16      | 2(int16)   | yaw角速度   |
| pitch_rate | 18      | 2(int16)   | pitch角速度 |
| roll_rate  | 20      | 2(int16)   | roll角速度  |

##### Frame2(n=11)
| 域          | 偏移位置 | 大小(字节) | 详细描述   |
| :---------: | :-----: | :--------: | :-------: |
| shoot_freq  | 4       | 1(uint8)   | 射频       |
| shoot_ping  | 5       | 2(uint16)  | 发射延迟   |
| shoot_heat  | 7       | 2(uint16)  | 实时热量   |
| shoot_pwm   | 9       | 2(uint16)  | 摩擦轮pwm  |
| shoot_speed | 11      | 4(float)   | 射速       |

---

## 更新日志
--V1.0  
1. **串口助手**  
常规串口调试助手  
    * __配置串口参数__
    * __设置16进制收发__
2. __示波器__  
根据数据帧协议解析数据并实时显示  

--V1.1  
1. __导出功能__  
可以根据所选的数据按帧为单位导出成.xlsx文件   
    * __导出文件的格式__  
        表头加粗，列加宽  
    * __导出文件的位置__  
        新建根目录下的TEST文件夹用于存放测试数据